<!-- Placeholder #main -->
<!-- Prevents Uncaught TypeError: Cannot read property 'append' of null error -->
<div id="main"></div>
<script src="simpletest.js"></script>
<script src="helper.js"></script>
<script src="../scripts.js"></script>
<script>

  /*

  Sketch of requirements for text and id values of markup generated by todo list:

  Additional notes:
  The textContent of each individual <li> should be the value stored on the text key in each todo object.
  The id value of each individual <li> should be the value stored on the id key in each todo object.

  It is possible that the textContent of each individual todo can be prepended with some version of the id value at a later date.
  Doing this would make it easier for the user to modify each individual todo using a single interface at the top of the app.

  -------------------------------

  Requirements:

  Add text to todo:
  1) If todos[0].text === '1st', ul.children[0].textContent should be '1st'.
  Check text of different todo:
  2) If todos[1].text === '2nd', ul.children[1].textContent should be '2nd'.
  Add id value to todo:
  3) If todos[0] exists, then ul.children[0].id should be '0'.
  Check id value of a different todo:
  4) If todos[1] exists, then ul.children[1].id should be '1'.

  */

  // Destructure variables so they are easier to access:
  var todoList = nestedTodos.todoList;
  var add = todoList.add;

  tests({
    // When application has loaded:
    "1) If todos.length === 0, main.children[0].tagName should be 'DIV'.": function () {
      var main = document.querySelector('#main');

      eq(main.children[0].tagName, "DIV");
    },
    // Basic todo:
    "2) If todos.length === 1, div.children[0].tagName should be 'UL'.": function(){
      add('1st', []);
      var main = document.querySelector('#main');
      var div = main.children[0];

      eq(div.children[0].tagName, "UL");
      resetAfterTest();
    },
    // Add first todo:
    "3) If todos.length === 1, ul.children[0].tagName should be 'LI'.": function(){
      add('1st', []);
      var main = document.querySelector('#main');
      var ul = main.children[0].children[0];

      eq(ul.children[0].tagName, "LI");
      resetAfterTest();
    },
    // Set todos.length > 1:
    "4) If todos.length === 2, ul.children[1].tagName should be 'LI'.": function(){
      add('1st', []);
      add('2nd', []);
      var main = document.querySelector('#main');
      var ul = main.children[0].children[0];

      eq(ul.children[1].tagName, "LI");
      resetAfterTest();
    },
    // One more, just to be sure.
    // Test passed without writing additional code. Kept for documentation.
    "5) If todos.length === 3, ul.children[2].tagName should be 'LI'.": function(){
      add('1st', []);
      add('2nd', []);
      add('3rd', []);
      var main = document.querySelector('#main');
      var ul = main.children[0].children[0];

      eq(ul.children[2].tagName, "LI");
      resetAfterTest();
    },
    // Check for <ul> in nested todo:
    "6) If todos[0].todos.length === 1, ul.children[0].children[0].tagName should be 'UL'.": function(){
      add('1st', []);
      add('1st nested', [0]);
      var main = document.querySelector('#main');
      var ul = main.children[0].children[0];

      eq(ul.children[0].children[0].tagName, "UL");
      resetAfterTest();
    },
    // Check for <li> in nested todo:
    "7) If todos[0].todos.length === 1, ul.children[0].children[0].children[0].tagName should be 'LI'.": function(){
      add('1st', []);
      add('1st nested', [0]);
      var main = document.querySelector('#main');
      var ul = main.children[0].children[0];

      eq(ul.children[0].children[0].children[0].tagName, "LI");
      resetAfterTest();
    },
    // Change index of nested todo:
    // Test passed without writing additional code. Kept for documentation.
    "8) If todos[1].todos.length === 1, ul.children[1].children[0].children[0].tagName should be 'LI'.": function(){
      add('1st', []);
      add('2nd', []);
      add('1st nested', [1]);
      var main = document.querySelector('#main');
      var ul = main.children[0].children[0];

      eq(ul.children[1].children[0].children[0].tagName, "LI");
      resetAfterTest();
    },
    // Set nested todos.length > 0:
    "9) If todos[1].todos.length === 2, ul.children[1].children[0].children[1].tagName should be 'LI'.": function(){
      add('1st', []);
      add('2nd', []);
      add('1st nested', [1]);
      add('2nd nested', [1]);
      var main = document.querySelector('#main');
      var ul = main.children[0].children[0];

      eq(ul.children[1].children[0].children[1].tagName, "LI");
      resetAfterTest();
    },
    // Check for <ul> in nested todo in nested todo:
    "10) If todos[0].todos[0].todos.length === 1, ul.children[0].children[0].children[0].children[0].tagName should be 'UL'.": function(){
      add('1st', []);
      add('1st nested', [0]);
      add('1st nested in nested', [0,0]);
      var main = document.querySelector('#main');
      var ul = main.children[0].children[0];

      eq(ul.children[0].children[0].children[0].children[0].tagName, "UL");
      resetAfterTest();
    },
    // Check for <li> in nested todo in nested todo:
    "11) If todos[0].todos[0].todos.length === 1, ul.children[0].children[0].children[0].children[0].children[0].tagName should be 'LI'.": function(){
      add('1st', []);
      add('1st nested', [0]);
      add('1st nested in nested', [0,0]);
      var main = document.querySelector('#main');
      var ul = main.children[0].children[0];

      eq(ul.children[0].children[0].children[0].children[0].children[0].tagName, "LI");
      resetAfterTest();
    },
    // Add text to a todo:
    "12) If todos[0].text === '1st todo', ul.children[0].textContent should be '1st'.": function(){
      add('1st', []);
      var main = document.querySelector('#main');
      var ul = main.children[0].children[0];

      eq(ul.children[0].textContent, '1st');
      resetAfterTest();
    },
    // Check text of different todo to be sure:
    // Test passed without writing additional code. Kept for documentation.
    "13) If todos[1].text === '2nd', ul.children[1].textContent should be '2nd'.": function(){
      add('1st', []);
      add('2nd', []);
      var main = document.querySelector('#main');
      var ul = main.children[0].children[0];

      eq(ul.children[1].textContent, '2nd');
      resetAfterTest();
    }
  });
</script>