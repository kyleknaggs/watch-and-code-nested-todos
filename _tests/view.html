<!-- Placeholder #main -->
<!-- Prevents Uncaught TypeError: Cannot read property 'append' of null error -->
<div id="main"></div>
<script src="simpletest.js"></script>
<script src="helper.js"></script>
<script src="../scripts.js"></script>
<script>

  /*

  Sketch of requirements for markup generated by todo list:

  Additional notes:
  All markup that will be tested will be appeneded to #main element on page.
  This markup will be generated from scratch ever time view.render() is run.

  view.render() is a function that will be called:
  a. Whenever the application is initially loaded.
  b. Any time a function that modifies todoList.todos() is run.

  -------------------------------

  Requirements:

  If todos.length === 0:

  1) If todos.length === 0, main.children[0].tagName should be 'DIV'.
  Expect pass as application has been set up for this already.
  <div>
  </div>

  If todos.length === 1:

  2) If todos.length === 1, div.children[0].tagName should be 'UL'.
  Expect fail.
  <div>
    <ul></ul>
  </div>

  3) If todos.length === 1, ul.children[0].tagName should be 'LI'.
  Expect fail.
  <div>
    <ul>
      <li></li>
    </ul>
  </div>

  If todos.length === 2:

  4) If todos.length === 2, ul.children[1].tagName should be 'LI'.
  Expect fail.
  <div>
    <ul>
      <li></li>
      <li></li>
    </ul>
  </div>

  If todos.length === 3:

  5) If todos.length === 3, ul.children[2].tagName should be 'LI'.
  Expect pass.
  <div>
    <ul>
      <li></li>
      <li></li>
      <li></li>
    </ul>
  </div>


  If todos[0].todos.length === 1:

  6) If todos[0].todos.length === 1, ul.children[0].children[0].tagName should be 'UL'.
  Expect fail.
  <div>
    <ul>
      <li>
        <ul></ul>
      </li>
    </ul>
  </div>

  7) If todos[0].todos.length === 1, ul.children[0].children[0].children[0].tagName should be 'LI'.
  Expect fail.
  <div>
    <ul>
      <li>
        <ul>
          <li></li>
        </ul>
      </li>
    </ul>
  </div>

  If todos[1].todos.length === 1:

  8) If todos[1].todos.length === 1, ul.children[1].children[0].children[0].tagName should be 'LI'.
  Expectation of pass/fail depends on what logic has been built up to this point.
  <div>
    <ul>
      <li></li>
      <li>
        <ul>
          <li></li>
        </ul>
      </li>
    </ul>
  </div>

  If todos[1].todos.length === 2:

  9) If todos[1].todos.length === 2, ul.children[1].children[0].children[1].tagName should be 'LI'.
  Expect fail.
  <div>
    <ul>
      <li></li>
      <li>
        <ul>
          <li></li>
          <li></li>
        </ul>
      </li>
    </ul>
  </div>

  If todos[0].todos[0].todos.length === 1:

  10) If todos[0].todos[0].todos.length === 1, ul.children[0].children[0].children[0].children[0].tagName should be 'UL'.
  Expect fail.
  <div>
    <ul>
      <li>
        <ul>
          <li>
            <ul></ul>
          </li>
        </ul>
      </li>
    </ul>
  </div>

  11) If todos[0].todos[0].todos.length === 1, ul.children[0].children[0].children[0].children[0].children[0].tagName should be 'LI'.
  Expect pass once the recursive function has been set up.
  <div>
    <ul>
      <li>
        <ul>
          <li>
            <ul>
              <li></li>
            </ul>
          </li>
        </ul>
      </li>
    </ul>
  </div>

  Stress test: todos.[3].todos.[0].todos.[2].todos.length === 1.

  12) Sketch this test later as this test only makes sense once the other are complete.

  */

  // Destructure variables so they are easier to access:
  var todoList = nestedTodos.todoList;
  var add = todoList.add;

  tests({
    // When application has loaded:
    "1) If todos.length === 0, main.children[0].tagName should be 'DIV'.": function () {
      var main = document.querySelector('#main');

      eq(main.children[0].tagName, "DIV");
    },
    // Basic todo:
    "2) If todos.length === 1, div.children[0].tagName should be 'UL'.": function(){
      add('1st', []);
      var main = document.querySelector('#main');
      var div = main.children[0];

      eq(div.children[0].tagName, "UL");
      resetAfterTest();
    },
    // Add first todo:
    "3) If todos.length === 1, ul.children[0].tagName should be 'LI'.": function(){
      add('1st', []);
      var main = document.querySelector('#main');
      var ul = main.children[0].children[0];

      eq(ul.children[0].tagName, "LI");
      resetAfterTest();
    },
    // Set todos.length > 1:
    "4) If todos.length === 2, ul.children[1].tagName should be 'LI'.": function(){
      add('1st', []);
      add('2nd', []);
      var main = document.querySelector('#main');
      var ul = main.children[0].children[0];

      eq(ul.children[1].tagName, "LI");
      resetAfterTest();
    },
    // One more, just to be sure.
    // Test passed without writing additional code. Kept for documentation.
    "5) If todos.length === 3, ul.children[2].tagName should be 'LI'.": function(){
      add('1st', []);
      add('2nd', []);
      add('3rd', []);
      var main = document.querySelector('#main');
      var ul = main.children[0].children[0];

      eq(ul.children[2].tagName, "LI");
      resetAfterTest();
    },
    // Check for <ul> in nested todo:
    "6) If todos[0].todos.length === 1, ul.children[0].children[0].tagName should be 'UL'.": function(){
      add('1st', []);
      add('1st nested', [0]);
      var main = document.querySelector('#main');
      var ul = main.children[0].children[0];

      eq(ul.children[0].children[0].tagName, "UL");
      resetAfterTest();
    },
    // Check for <li> in nested todo:
    "7) If todos[0].todos.length === 1, ul.children[0].children[0].children[0].tagName should be 'LI'.": function(){
      add('1st', []);
      add('1st nested', [0]);
      var main = document.querySelector('#main');
      var ul = main.children[0].children[0];

      eq(ul.children[0].children[0].children[0].tagName, "LI");
      resetAfterTest();
    },
    // Change index of nested todo:
    // Test passed without writing additional code. Kept for documentation.
    "8) If todos[1].todos.length === 1, ul.children[1].children[0].children[0].tagName should be 'LI'.": function(){
      add('1st', []);
      add('2nd', []);
      add('1st nested', [1]);
      var main = document.querySelector('#main');
      var ul = main.children[0].children[0];

      eq(ul.children[1].children[0].children[0].tagName, "LI");
      resetAfterTest();
    },
    // Set nested todos.length > 0:
    "9) If todos[1].todos.length === 2, ul.children[1].children[0].children[1].tagName should be 'LI'.": function(){
      add('1st', []);
      add('2nd', []);
      add('1st nested', [1]);
      add('2nd nested', [1]);
      var main = document.querySelector('#main');
      var ul = main.children[0].children[0];

      eq(ul.children[1].children[0].children[1].tagName, "LI");
      resetAfterTest();
    },
    // Check for <ul> in nested todo in nested todo:
    "10) If todos[0].todos[0].todos.length === 1, ul.children[0].children[0].children[0].children[0].tagName should be 'UL'.": function(){
      add('1st', []);
      add('1st nested', [0]);
      add('1st nested in nested', [0,0]);
      var main = document.querySelector('#main');
      var ul = main.children[0].children[0];

      eq(ul.children[0].children[0].children[0].children[0].tagName, "UL");
      resetAfterTest();
    },
    // Check for <li> in nested todo in nested todo:
    "11) If todos[0].todos[0].todos.length === 1, ul.children[0].children[0].children[0].children[0].children[0].tagName should be 'LI'.": function(){
      add('1st', []);
      add('1st nested', [0]);
      add('1st nested in nested', [0,0]);
      var main = document.querySelector('#main');
      var ul = main.children[0].children[0];

      eq(ul.children[0].children[0].children[0].children[0].children[0].tagName, "LI");
      resetAfterTest();
    }
  });
</script>