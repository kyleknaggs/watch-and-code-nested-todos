<script src="simpletest.js"></script>
<script src="../scripts.js"></script>
<script>

  // Destructure variables so they are easier to access:
  var add = nestedTodos.todoList.add;
  var getToModify = nestedTodos.util.getToModify;

  tests({
    // Base case:
    // Case 1, option a: add('1st', []).
    "1) If thisArg === window, util.getToModify(thisArg) should return todoList.todos.": function () {
      var toModify = getToModify(window);
      var todoList = nestedTodos.todoList;
      eq(toModify, todoList.todos);
    },
    // Case 2, left of the dot rule: todoList.add('1st', []).
    "2) If thisArg === todoList, util.getToModify(thisArg) should return todoList.todos.": function () {
      var todoList = nestedTodos.todoList;
      var toModify = getToModify(todoList);
      eq(toModify, todoList.todos);
    },
    // Recursive case:
    // Case 4, explicitly set this: todoList.add.call({text: '1st', todos: []}, 'Nested', []);
    "3) If thisArg === todoList.todos[0], util.getToModify(thisArg) should return todoList.todos[0].todos.": function () {
      add('1st', []);

      var todoList = nestedTodos.todoList;
      var toModify = getToModify(todoList.todos[0]);
      eq(toModify, todoList.todos[0].todos);
    }
  });
</script>