<script src="simpletest.js"></script>
<script src="../scripts.js"></script>
<script>
  /*

  Requirements strategy for Nested todos data structure:

  Phase 1: Basic todos
  1) It should have a place to store todos.
  2) It should have a way to display todos.
  3) It should have a way to add new todos.

  Phase 2: Basic nested todos
  4) It should have a place to store nested todos.
  5) It should have a way to display nested todos.
  6) It should have a way to add nested todos.

  Phase 3: Deletion of todos and nested todos:
  7) It should have a way to delete a todo.
  8) It should have a way to delete a nested todo.

  Phase 4: Editing of todos and nested todos:
  9) It should have a way to edit the completed status of a todo.
  10) It should have a way to edit the completed status a nested todo.
  11) It should have a way to edit the text of a todo.
  12) It should have a way to edit the text of a nested todo.

  ----------------------------

  */

  // Reminder: Write note about deleting tests if you don't need to add any new code to pass them.

  // Destructure variables so they are easier to access:
  var todoList = nestedTodos.todoList;
  var add = todoList.add;

  // Helper function to set todoList.todos to [] after each test:
  function emptyTodos(){
    nestedTodos.todoList.todos = [];
  }

  tests({
    // Phase 1:
    // It should have a way to store todos.
    "1a) If the application has just loaded, todos is [].": function () {
      var todos = nestedTodos.todoList.todos;
      eq(Array.isArray(todos), true);
      eq(todos.length, 0);

      emptyTodos();
    },
    // It should have a way to add new todos:
    "2a) If todos is [] then after add('1st'), todos[0] is {text:'1st', todos: []}.": function () {
      add('1st');

      // Check number of todos:
      var todos = nestedTodos.todoList.todos;
      eq(todos.length, 1);
      // Check shape of first todo:
      var firstTodo = todos[0];
      eq(firstTodo.text, '1st');
      eq(Array.isArray(firstTodo.todos), true);
      eq(firstTodo.todos.length, 0);

      emptyTodos();
    },
    "2b) If todos is ['1st'] then after add('2nd'), todos[1] is {text:'2nd', todos: []}.": function () {
      // Passed without additional code. Consider deleting.
      add('1st');
      add('2nd');

      // Check number of todos:
      var todos = nestedTodos.todoList.todos;
      eq(todos.length, 2);
      // Check shape of second todo:
      var secondTodo = todos[1];
      eq(secondTodo.text, '2nd');
      eq(Array.isArray(secondTodo.todos), true);
      eq(secondTodo.todos.length, 0);

      emptyTodos();
    },
    "2c) If todos is ['1st', '2nd'] then after add('3rd'), todos[2] is {text:'3rd', todos: []}.": function () {
      // Passed without additional code. Consider deleting.
      add('1st');
      add('2nd');
      add('3rd');

      // Check number of todos:
      var todos = nestedTodos.todoList.todos;
      eq(todos.length, 3);
      // Check shape of third todo:
      var thirdTodo = todos[2];
      eq(thirdTodo.text, '3rd');
      eq(Array.isArray(thirdTodo.todos), true);
      eq(thirdTodo.todos.length, 0);

      emptyTodos();
    }
  });
</script>